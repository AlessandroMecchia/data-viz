<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Page title | Data visualization course</title>
		<meta name="description" content="Project description">
		<meta name="author" content="Authors' name and surname">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- allow webpage to be run in full-screen mode -->
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<!-- set nav bar color -->
		<meta name="theme-color" content="black"> <!-- Chrome, Firefox OS and Opera -->
		<meta name="msapplication-navbutton-color" content="black"> <!-- Windows Phone -->
		<meta name="apple-mobile-web-app-status-bar-style" content="black"> <!-- iOS Safari -->
		<link type="text/css" rel="stylesheet" href="../../../style/style.css">
	</head>
	<body>
		<div id="topbar">
			<nav>
				<div class="go_home">
					<a href="../../../../" title="Go back home">
						<span>
							←
						</span>
						<span>
							Data visualization course
						</span>
					</a>
				</div>
			</nav>
		</div>
		<main style="width: 100%;">
			<header class="protocol">
				<span>
					<a href="../../../../index.html#protocol-section4" title="Go back">← Back
					</a>
				</span>
				<h1>
					Top Global Pesticide Consumers by Country
				</h1>
				<h2>
					Visualization protocol
				</h2>
			</header>
			<article>
				<section>
					<h4>Timestamp</h4>
					<p>1990-2022</p><br/>
					
					<h4>Data source</h4>
					<p><a href="https://www.fao.org/faostat/en/#data/RP">FAOSTAT - Pesticides Total</a></p><br/>

					<h4>Dataset</h4>
					<p>modified_flourish_wide_format_countries_with_flags.csv</p><br/>
				
					<h4>Protocol</h4>
					<p>Flourish + Python</p><br/>

					<h4>Preprocessing steps:</h4>
					<ol style="font-size: 1.3rem;">
						<li>Load the Dataset: Read the CSV file (<code>cleaned_dataset.csv</code>) into a Pandas DataFrame.</li>
						<li>Reshape with Melt: Use the <code>melt</code> function to reshape the DataFrame. Include <code>Area</code> and <code>Year</code> as identifier columns (<code>id_vars</code>) and transform selected pesticide-related columns (<code>value_vars</code>) into a long format with <code>Pesticide Type</code> and <code>Usage</code> columns.</li>
						<li>Filter Rows: Exclude rows where the <code>Pesticide Type</code> column equals <code>'Pesticides (total)'</code>.</li>
						<li>Harmonize Country Names: Replace <code>China, mainland</code> and <code>Mainland</code> in the <code>Area</code> column with <code>China</code>.</li>
						<li>Pivot Data: Transform the long-format DataFrame into a wide format with <code>Area</code> as rows and <code>Year</code> as columns. Aggregate <code>Usage</code> values using the <code>sum</code> function.</li>
						<li>Generate Flag URLs: Create a dictionary mapping country names to their flag URLs using the ISO codes provided.</li>
						<li>Map Flag URLs: Add a <code>Flag URL</code> column to the DataFrame by mapping the <code>Area</code> column to the flag URL dictionary.</li>
						<li>Save Transformed Data: Write the transformed dataset with flag URLs to a new CSV file (<code>modified_tableau_wide_format_countries_with_flags.csv</code>).</li>
					</ol>
				</section>
			</article>
		</main>
	</body>
</html>

